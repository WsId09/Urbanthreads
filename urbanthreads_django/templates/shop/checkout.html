{% extends 'base.html' %}

{% block title %}Checkout - UrbanThreads{% endblock %}

{% block content %}
<div style="padding: 100px 0; background: #fff;">
    <div class="container">
        <div class="text-center mb-5" data-aos="fade-down">
            <p style="color: #D4AF37; font-size: 11px; letter-spacing: 5px; text-transform: uppercase; margin-bottom: 20px;">Complete Your Order</p>
            <h2 style="font-family: 'Playfair Display', serif; font-size: 3rem; color: #000; letter-spacing: 3px; text-transform: uppercase;">
                Secure Checkout
            </h2>
        </div>
        
        <div class="row">
            <div class="col-md-7" data-aos="fade-right">
                <!-- SHIPPING INFORMATION -->
                <div style="background: #fff; border: 1px solid rgba(212, 175, 55, 0.3); padding: 40px; margin-bottom: 30px;">
                    <h5 style="font-family: 'Playfair Display', serif; font-size: 1.5rem; color: #000; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 30px; border-bottom: 1px solid rgba(212, 175, 55, 0.3); padding-bottom: 15px;">
                        <i class="fas fa-shipping-fast me-3" style="color: #D4AF37;"></i>Shipping Information
                    </h5>
                    
                    <form method="POST" id="checkoutForm" novalidate>
                        {% csrf_token %}
                        
                        <div class="mb-4">
                            <label style="color: #000; font-size: 11px; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 10px; display: block; font-weight: 600;">Full Name *</label>
                            <input type="text" name="full_name" id="fullName" required minlength="3" pattern="[A-Za-z\s]+"
                                   style="width: 100%; padding: 15px 20px; border: 2px solid #ddd; font-size: 14px; transition: all 0.3s; border-radius: 5px;"
                                   onfocus="this.style.borderColor='#D4AF37'; this.style.boxShadow='0 0 0 3px rgba(212, 175, 55, 0.1)'"
                                   onblur="this.style.borderColor='#ddd'; this.style.boxShadow='none'"
                                   placeholder="Enter your full name">
                            <div class="invalid-feedback" style="color: #c33; font-size: 12px; margin-top: 5px;">
                                Please enter your full name (minimum 3 characters, letters only).
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-4">
                                <label style="color: #000; font-size: 11px; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 10px; display: block; font-weight: 600;">Email *</label>
                                <input type="email" name="email" id="email" required pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"
                                       style="width: 100%; padding: 15px 20px; border: 2px solid #ddd; font-size: 14px; transition: all 0.3s; border-radius: 5px;"
                                       onfocus="this.style.borderColor='#D4AF37'; this.style.boxShadow='0 0 0 3px rgba(212, 175, 55, 0.1)'"
                                       onblur="this.style.borderColor='#ddd'; this.style.boxShadow='none'"
                                       placeholder="your@email.com">
                                <div class="invalid-feedback" style="color: #c33; font-size: 12px; margin-top: 5px;">
                                    Please enter a valid email address.
                                </div>
                            </div>
                            
                            <div class="col-md-6 mb-4">
                                <label style="color: #000; font-size: 11px; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 10px; display: block; font-weight: 600;">Phone *</label>
                                <input type="tel" name="phone" id="phone" required pattern="[0-9]{10}" maxlength="10"
                                       style="width: 100%; padding: 15px 20px; border: 2px solid #ddd; font-size: 14px; transition: all 0.3s; border-radius: 5px;"
                                       onfocus="this.style.borderColor='#D4AF37'; this.style.boxShadow='0 0 0 3px rgba(212, 175, 55, 0.1)'"
                                       onblur="this.style.borderColor='#ddd'; this.style.boxShadow='none'"
                                       placeholder="10-digit mobile">
                                <div class="invalid-feedback" style="color: #c33; font-size: 12px; margin-top: 5px;">
                                    Please enter a valid 10-digit phone number.
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            <label style="color: #000; font-size: 11px; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 10px; display: block; font-weight: 600;">Address *</label>
                            <textarea name="address" id="address" rows="3" required minlength="10"
                                      style="width: 100%; padding: 15px 20px; border: 2px solid #ddd; font-size: 14px; transition: all 0.3s; border-radius: 5px; resize: vertical;"
                                      onfocus="this.style.borderColor='#D4AF37'; this.style.boxShadow='0 0 0 3px rgba(212, 175, 55, 0.1)'"
                                      onblur="this.style.borderColor='#ddd'; this.style.boxShadow='none'"
                                      placeholder="House no., Street, Area"></textarea>
                            <div class="invalid-feedback" style="color: #c33; font-size: 12px; margin-top: 5px;">
                                Please enter your complete address (minimum 10 characters).
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-4">
                                <label style="color: #000; font-size: 11px; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 10px; display: block; font-weight: 600;">City *</label>
                                <input type="text" name="city" id="city" required minlength="2" pattern="[A-Za-z\s]+"
                                       style="width: 100%; padding: 15px 20px; border: 2px solid #ddd; font-size: 14px; transition: all 0.3s; border-radius: 5px;"
                                       onfocus="this.style.borderColor='#D4AF37'; this.style.boxShadow='0 0 0 3px rgba(212, 175, 55, 0.1)'"
                                       onblur="this.style.borderColor='#ddd'; this.style.boxShadow='none'"
                                       placeholder="Enter city">
                                <div class="invalid-feedback" style="color: #c33; font-size: 12px; margin-top: 5px;">
                                    Please enter a valid city name.
                                </div>
                            </div>
                            
                            <div class="col-md-6 mb-4">
                                <label style="color: #000; font-size: 11px; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 10px; display: block; font-weight: 600;">State *</label>
                                <input type="text" name="state" id="state" required minlength="2" pattern="[A-Za-z\s]+"
                                       style="width: 100%; padding: 15px 20px; border: 2px solid #ddd; font-size: 14px; transition: all 0.3s; border-radius: 5px;"
                                       onfocus="this.style.borderColor='#D4AF37'; this.style.boxShadow='0 0 0 3px rgba(212, 175, 55, 0.1)'"
                                       onblur="this.style.borderColor='#ddd'; this.style.boxShadow='none'"
                                       placeholder="Enter state">
                                <div class="invalid-feedback" style="color: #c33; font-size: 12px; margin-top: 5px;">
                                    Please enter a valid state name.
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            <label style="color: #000; font-size: 11px; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 10px; display: block; font-weight: 600;">Pincode *</label>
                            <input type="text" name="pincode" id="pincode" required pattern="[0-9]{6}" maxlength="6"
                                   style="width: 100%; padding: 15px 20px; border: 2px solid #ddd; font-size: 14px; transition: all 0.3s; border-radius: 5px;"
                                   onfocus="this.style.borderColor='#D4AF37'; this.style.boxShadow='0 0 0 3px rgba(212, 175, 55, 0.1)'"
                                   onblur="this.style.borderColor='#ddd'; this.style.boxShadow='none'"
                                   placeholder="6-digit PIN">
                            <div class="invalid-feedback" style="color: #c33; font-size: 12px; margin-top: 5px;">
                                Please enter a valid 6-digit pincode.
                            </div>
                        </div>
                        
                        <!-- PAYMENT METHOD SELECTION -->
                        <div style="background: rgba(212, 175, 55, 0.05); border: 1px solid rgba(212, 175, 55, 0.3); padding: 40px; border-radius: 10px; margin-top: 40px;">
                            <h5 style="font-family: 'Playfair Display', serif; font-size: 1.5rem; color: #000; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 30px; border-bottom: 1px solid rgba(212, 175, 55, 0.3); padding-bottom: 15px;">
                                <i class="fas fa-credit-card me-3" style="color: #D4AF37;"></i>Payment Method
                            </h5>
                            
                            <input type="hidden" name="payment_method" id="selectedPaymentMethod" value="cod">
                            
                            <!-- UPI PAYMENT -->
                            <div class="payment-option" data-payment="upi" style="background: #fff; border: 2px solid #ddd; padding: 25px; margin-bottom: 20px; border-radius: 10px; cursor: pointer; transition: all 0.3s;"
                                 onclick="selectPayment('upi', this)">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <div style="display: flex; align-items: center;">
                                        <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #5f259f, #00a859); border-radius: 10px; display: flex; align-items: center; justify-content: center; margin-right: 20px;">
                                            <i class="fas fa-mobile-alt" style="color: #fff; font-size: 24px;"></i>
                                        </div>
                                        <div>
                                            <h6 style="font-family: 'Playfair Display', serif; font-size: 1.2rem; color: #000; letter-spacing: 1px; text-transform: uppercase; margin-bottom: 5px;">
                                                UPI Payment
                                            </h6>
                                            <p style="color: #666; font-size: 12px; margin: 0; letter-spacing: 1px;">
                                                Google Pay, PhonePe, Paytm & more
                                            </p>
                                        </div>
                                    </div>
                                    <div class="payment-check" style="width: 30px; height: 30px; border: 2px solid #ddd; border-radius: 50%; display: flex; align-items: center; justify-content: center; transition: all 0.3s;">
                                        <i class="fas fa-check" style="color: #fff; font-size: 14px; display: none;"></i>
                                    </div>
                                </div>
                                
                                <!-- UPI Details (Hidden by default) -->
                                <div class="payment-details" style="display: none; margin-top: 25px; padding-top: 25px; border-top: 1px solid #eee;">
                                    <label style="color: #000; font-size: 11px; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 10px; display: block; font-weight: 600;">UPI ID</label>
                                    <input type="text" placeholder="yourname@upi" style="width: 100%; padding: 12px 15px; border: 2px solid #ddd; font-size: 14px; border-radius: 5px;">
                                </div>
                            </div>
                            
                            <!-- CREDIT/DEBIT CARD -->
                            <div class="payment-option" data-payment="card" style="background: #fff; border: 2px solid #ddd; padding: 25px; margin-bottom: 20px; border-radius: 10px; cursor: pointer; transition: all 0.3s;"
                                 onclick="selectPayment('card', this)">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <div style="display: flex; align-items: center;">
                                        <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 10px; display: flex; align-items: center; justify-content: center; margin-right: 20px;">
                                            <i class="fas fa-credit-card" style="color: #fff; font-size: 24px;"></i>
                                        </div>
                                        <div>
                                            <h6 style="font-family: 'Playfair Display', serif; font-size: 1.2rem; color: #000; letter-spacing: 1px; text-transform: uppercase; margin-bottom: 5px;">
                                                Credit / Debit Card
                                            </h6>
                                            <p style="color: #666; font-size: 12px; margin: 0; letter-spacing: 1px;">
                                                Visa, Mastercard, Amex, Rupay
                                            </p>
                                        </div>
                                    </div>
                                    <div class="payment-check" style="width: 30px; height: 30px; border: 2px solid #ddd; border-radius: 50%; display: flex; align-items: center; justify-content: center; transition: all 0.3s;">
                                        <i class="fas fa-check" style="color: #fff; font-size: 14px; display: none;"></i>
                                    </div>
                                </div>
                                
                                <!-- Card Details (Hidden by default) -->
                                <div class="payment-details" style="display: none; margin-top: 25px; padding-top: 25px; border-top: 1px solid #eee;">
                                    <div class="mb-3">
                                        <label style="color: #000; font-size: 11px; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 10px; display: block; font-weight: 600;">Card Number</label>
                                        <input type="text" placeholder="1234 5678 9012 3456" maxlength="19" style="width: 100%; padding: 12px 15px; border: 2px solid #ddd; font-size: 14px; border-radius: 5px;">
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label style="color: #000; font-size: 11px; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 10px; display: block; font-weight: 600;">Expiry Date</label>
                                            <input type="text" placeholder="MM/YY" maxlength="5" style="width: 100%; padding: 12px 15px; border: 2px solid #ddd; font-size: 14px; border-radius: 5px;">
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label style="color: #000; font-size: 11px; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 10px; display: block; font-weight: 600;">CVV</label>
                                            <input type="password" placeholder="123" maxlength="3" style="width: 100%; padding: 12px 15px; border: 2px solid #ddd; font-size: 14px; border-radius: 5px;">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- NET BANKING -->
                            <div class="payment-option" data-payment="netbanking" style="background: #fff; border: 2px solid #ddd; padding: 25px; margin-bottom: 20px; border-radius: 10px; cursor: pointer; transition: all 0.3s;"
                                 onclick="selectPayment('netbanking', this)">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <div style="display: flex; align-items: center;">
                                        <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #f093fb, #f5576c); border-radius: 10px; display: flex; align-items: center; justify-content: center; margin-right: 20px;">
                                            <i class="fas fa-university" style="color: #fff; font-size: 24px;"></i>
                                        </div>
                                        <div>
                                            <h6 style="font-family: 'Playfair Display', serif; font-size: 1.2rem; color: #000; letter-spacing: 1px; text-transform: uppercase; margin-bottom: 5px;">
                                                Net Banking
                                            </h6>
                                            <p style="color: #666; font-size: 12px; margin: 0; letter-spacing: 1px;">
                                                All major banks supported
                                            </p>
                                        </div>
                                    </div>
                                    <div class="payment-check" style="width: 30px; height: 30px; border: 2px solid #ddd; border-radius: 50%; display: flex; align-items: center; justify-content: center; transition: all 0.3s;">
                                        <i class="fas fa-check" style="color: #fff; font-size: 14px; display: none;"></i>
                                    </div>
                                </div>
                                
                                <!-- Bank Selection (Hidden by default) -->
                                <div class="payment-details" style="display: none; margin-top: 25px; padding-top: 25px; border-top: 1px solid #eee;">
                                    <label style="color: #000; font-size: 11px; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 10px; display: block; font-weight: 600;">Select Bank</label>
                                    <select style="width: 100%; padding: 12px 15px; border: 2px solid #ddd; font-size: 14px; border-radius: 5px;">
                                        <option>Choose your bank</option>
                                        <option>State Bank of India</option>
                                        <option>HDFC Bank</option>
                                        <option>ICICI Bank</option>
                                        <option>Axis Bank</option>
                                        <option>Punjab National Bank</option>
                                        <option>Bank of Baroda</option>
                                        <option>Kotak Mahindra Bank</option>
                                        <option>Other</option>
                                    </select>
                                </div>
                            </div>
                            
                            <!-- WALLET -->
                            <div class="payment-option" data-payment="wallet" style="background: #fff; border: 2px solid #ddd; padding: 25px; margin-bottom: 20px; border-radius: 10px; cursor: pointer; transition: all 0.3s;"
                                 onclick="selectPayment('wallet', this)">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <div style="display: flex; align-items: center;">
                                        <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #4facfe, #00f2fe); border-radius: 10px; display: flex; align-items: center; justify-content: center; margin-right: 20px;">
                                            <i class="fas fa-wallet" style="color: #fff; font-size: 24px;"></i>
                                        </div>
                                        <div>
                                            <h6 style="font-family: 'Playfair Display', serif; font-size: 1.2rem; color: #000; letter-spacing: 1px; text-transform: uppercase; margin-bottom: 5px;">
                                                Wallet
                                            </h6>
                                            <p style="color: #666; font-size: 12px; margin: 0; letter-spacing: 1px;">
                                                Paytm, Amazon Pay, Mobikwik
                                            </p>
                                        </div>
                                    </div>
                                    <div class="payment-check" style="width: 30px; height: 30px; border: 2px solid #ddd; border-radius: 50%; display: flex; align-items: center; justify-content: center; transition: all 0.3s;">
                                        <i class="fas fa-check" style="color: #fff; font-size: 14px; display: none;"></i>
                                    </div>
                                </div>
                                
                                <!-- Wallet Selection (Hidden by default) -->
                                <div class="payment-details" style="display: none; margin-top: 25px; padding-top: 25px; border-top: 1px solid #eee;">
                                    <label style="color: #000; font-size: 11px; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 10px; display: block; font-weight: 600;">Select Wallet</label>
                                    <select style="width: 100%; padding: 12px 15px; border: 2px solid #ddd; font-size: 14px; border-radius: 5px;">
                                        <option>Choose wallet</option>
                                        <option>Paytm</option>
                                        <option>Amazon Pay</option>
                                        <option>Mobikwik</option>
                                        <option>Freecharge</option>
                                    </select>
                                </div>
                            </div>
                            
                            <!-- CASH ON DELIVERY -->
                            <div class="payment-option active" data-payment="cod" style="background: #fff; border: 2px solid #D4AF37; padding: 25px; border-radius: 10px; cursor: pointer; transition: all 0.3s; box-shadow: 0 5px 20px rgba(212, 175, 55, 0.2);"
                                 onclick="selectPayment('cod', this)">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <div style="display: flex; align-items: center;">
                                        <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #D4AF37, #CD7F32); border-radius: 10px; display: flex; align-items: center; justify-content: center; margin-right: 20px;">
                                            <i class="fas fa-hand-holding-usd" style="color: #fff; font-size: 24px;"></i>
                                        </div>
                                        <div>
                                            <h6 style="font-family: 'Playfair Display', serif; font-size: 1.2rem; color: #000; letter-spacing: 1px; text-transform: uppercase; margin-bottom: 5px;">
                                                Cash on Delivery
                                            </h6>
                                            <p style="color: #666; font-size: 12px; margin: 0; letter-spacing: 1px;">
                                                Pay when you receive
                                            </p>
                                        </div>
                                    </div>
                                    <div class="payment-check" style="width: 30px; height: 30px; border: 2px solid #D4AF37; background: #D4AF37; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                        <i class="fas fa-check" style="color: #fff; font-size: 14px;"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <button type="submit" class="btn-luxury" style="width: 100%; margin-top: 30px; padding: 18px;">
                            <i class="fas fa-lock me-2"></i>Place Order Securely
                        </button>
                    </form>
                </div>
            </div>
            
            <div class="col-md-5" data-aos="fade-left">
                <div style="background: #000; border: 1px solid #D4AF37; padding: 40px; position: sticky; top: 100px;">
                    <h5 style="font-family: 'Playfair Display', serif; font-size: 1.5rem; color: #D4AF37; letter-spacing: 2px; text-transform: uppercase; margin-bottom: 30px; border-bottom: 1px solid rgba(212, 175, 55, 0.3); padding-bottom: 15px;">
                        Order Summary
                    </h5>
                    
                    {% for item in cart_items %}
                    <div style="border-bottom: 1px solid rgba(212, 175, 55, 0.2); padding: 20px 0; display: flex; align-items: center;">
                        <img src="{{ item.product.get_photo_url }}" alt="{{ item.product.name }}" 
                             style="width: 70px; height: 70px; object-fit: cover; border: 1px solid #D4AF37; margin-right: 20px;">
                        <div style="flex: 1;">
                            <p style="color: #F5F5DC; font-size: 13px; letter-spacing: 1px; text-transform: uppercase; margin-bottom: 5px;">
                                {{ item.product.name }}
                            </p>
                            <p style="color: #999; font-size: 11px; margin-bottom: 5px;">
                                Size: {{ item.size }} | Color: {{ item.color }}
                            </p>
                            <p style="color: #D4AF37; font-size: 14px; font-weight: 600;">
                                ₹{{ item.product.final_price }} × {{ item.quantity }}
                            </p>
                        </div>
                    </div>
                    {% endfor %}
                    
                    <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid rgba(212, 175, 55, 0.3);">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 15px;">
                            <span style="color: #F5F5DC; font-size: 12px; letter-spacing: 2px; text-transform: uppercase;">Subtotal</span>
                            <span style="color: #F5F5DC; font-size: 14px; font-weight: 600;">₹{{ subtotal }}</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 20px;">
                            <span style="color: #F5F5DC; font-size: 12px; letter-spacing: 2px; text-transform: uppercase;">Shipping</span>
                            <span style="color: {% if subtotal >= 2000 %}#48bb78{% else %}#F5F5DC{% endif %}; font-size: 14px; font-weight: 600;">
                                {% if subtotal >= 2000 %}FREE{% else %}₹100{% endif %}
                            </span>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding-top: 20px; border-top: 2px solid #D4AF37;">
                            <span style="color: #D4AF37; font-size: 14px; letter-spacing: 3px; text-transform: uppercase; font-weight: 700;">Total</span>
                            <span style="font-family: 'Playfair Display', serif; color: #D4AF37; font-size: 2rem; font-weight: 700;">
                                ₹{{ total }}
                            </span>
                        </div>
                    </div>
                    
                    <div style="margin-top: 30px; padding: 20px; background: rgba(212, 175, 55, 0.05); border: 1px solid rgba(212, 175, 55, 0.2); border-radius: 5px;">
                        <div style="display: flex; align-items: center; margin-bottom: 15px;">
                            <i class="fas fa-shield-alt" style="color: #D4AF37; font-size: 20px; margin-right: 15px;"></i>
                            <p style="color: #F5F5DC; font-size: 11px; letter-spacing: 1px; margin: 0;">100% Secure Payment</p>
                        </div>
                        <div style="display: flex; align-items: center; margin-bottom: 15px;">
                            <i class="fas fa-truck" style="color: #D4AF37; font-size: 20px; margin-right: 15px;"></i>
                            <p style="color: #F5F5DC; font-size: 11px; letter-spacing: 1px; margin: 0;">Fast & Free Delivery</p>
                        </div>
                        <div style="display: flex; align-items: center;">
                            <i class="fas fa-undo-alt" style="color: #D4AF37; font-size: 20px; margin-right: 15px;"></i>
                            <p style="color: #F5F5DC; font-size: 11px; letter-spacing: 1px; margin: 0;">30-Day Easy Returns</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Payment method selection
function selectPayment(method, element) {
    // Remove active class from all options
    document.querySelectorAll('.payment-option').forEach(option => {
        option.style.border = '2px solid #ddd';
        option.style.boxShadow = 'none';
        option.classList.remove('active');
        const check = option.querySelector('.payment-check');
        check.style.border = '2px solid #ddd';
        check.style.background = 'transparent';
        check.querySelector('i').style.display = 'none';
        
        // Hide payment details
        const details = option.querySelector('.payment-details');
        if (details) details.style.display = 'none';
    });
    
    // Add active class to selected option
    element.style.border = '2px solid #D4AF37';
    element.style.boxShadow = '0 5px 20px rgba(212, 175, 55, 0.2)';
    element.classList.add('active');
    const check = element.querySelector('.payment-check');
    check.style.border = '2px solid #D4AF37';
    check.style.background = '#D4AF37';
    check.querySelector('i').style.display = 'block';
    
    // Show payment details for selected option
    const details = element.querySelector('.payment-details');
    if (details) details.style.display = 'block';
    
    // Set hidden input value
    document.getElementById('selectedPaymentMethod').value = method;
}

// Form validation
document.getElementById('checkoutForm').addEventListener('submit', function(e) {
    if (!this.checkValidity()) {
        e.preventDefault();
        e.stopPropagation();
    }
    this.classList.add('was-validated');
});

// Input filters
document.getElementById('fullName').addEventListener('input', function(e) {
    this.value = this.value.replace(/[^A-Za-z\s]/g, '');
});

document.getElementById('phone').addEventListener('input', function(e) {
    this.value = this.value.replace(/[^0-9]/g, '');
});

document.getElementById('city').addEventListener('input', function(e) {
    this.value = this.value.replace(/[^A-Za-z\s]/g, '');
});

document.getElementById('state').addEventListener('input', function(e) {
    this.value = this.value.replace(/[^A-Za-z\s]/g, '');
});

document.getElementById('pincode').addEventListener('input', function(e) {
    this.value = this.value.replace(/[^0-9]/g, '');
});
</script>
{% endblock %}
